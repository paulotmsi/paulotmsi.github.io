<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Paulo</title>
<h1>Faça aqui seu Cadastro</h1>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }

        label {
            display: block;
            margin-top: 15px;
        }

        input {
            padding: 8px;
            width: 250px;
        }

        button {
            margin-top: 20px;
            padding: 10px 20px;
        }
        h1{color:lime;
        text-shadow:15px -9px 30px #FF0000
        }
    </style>
</head>
<body>

    <h2>Formulário de Cadastro</h2>

    <form id="formCadastro">
        
        <label>Nome:</label>
        <input 
            type="text" 
            id="nome" 
            name="nome" 
            required
        >

        <label>CPF:</label>
        <input 
            type="text" 
            id="cpf" 
            name="cpf"
            required
            pattern="\d{3}\.\d{3}\.\d{3}-\d{2}"
            placeholder="000.000.000-00"
            maxlength="14"
        >

        
        <label>Data de Nascimento:</label>
        <input 
            type="date" 
            id="dataNascimento" 
            name="dataNascimento"
            required
        >

        <button type="submit">Enviar</button>

    </form>

    <script>
        
        const dataNascimento = document.getElementById("dataNascimento");
        const hoje = new Date();
        hoje.setFullYear(hoje.getFullYear() - 18);
        dataNascimento.max = hoje.toISOString().split("T")[0];

        const cpfInput = document.getElementById("cpf");

        cpfInput.addEventListener("input", function () {
            let cpf = cpfInput.value.replace(/\D/g, "");

            if (cpf.length > 11) cpf = cpf.slice(0, 11);

            cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
            cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
            cpf = cpf.replace(/(\d{3})(\d{1,2})$/, "$1-$2");

            cpfInput.value = cpf;
        });


        function validarCPF(cpf) {
            cpf = cpf.replace(/\D/g, "");

            if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;

            let soma = 0;
            let resto;

            for (let i = 1; i <= 9; i++) {
                soma += parseInt(cpf.substring(i - 1, i)) * (11 - i);
            }

            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) resto = 0;
            if (resto !== parseInt(cpf.substring(9, 10))) return false;

            soma = 0;
            for (let i = 1; i <= 10; i++) {
                soma += parseInt(cpf.substring(i - 1, i)) * (12 - i);
            }

            resto = (soma * 10) % 11;
            if (resto === 10 || resto === 11) resto = 0;
            if (resto !== parseInt(cpf.substring(10, 11))) return false;

            return true;
        }

        document.getElementById("formCadastro").addEventListener("submit", function (e) {
            const cpf = cpfInput.value;

            if (!validarCPF(cpf)) {
                alert("CPF inválido!");
                e.preventDefault();
                return;
            }

            alert("Cadastro realizado com sucesso!");
        });

    </script>

</body>
</html>